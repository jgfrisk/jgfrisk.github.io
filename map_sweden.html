<!DOCTYPE html>
<html>
  <head>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <title>Sveriges 290 kommuner</title>
</head>
  <body>
        <style type="text/css">
          svg path{
            fill: olive;
            stroke: black;
            stroke-width: 0.5;
          }

          .test {
            width: 100px;
            left: 200px;
            border: 3px solid #73AD21;
            padding: 10px;
          }
          
        </style>
        <div id="container">
        
        <div id="title" class="test"></div>
        <div id="svgcontainer"></div>

        </div>

       <script type="text/javascript">
            var width = 500,
            height = 700;
            var scale = 1300;

            draw();

            function draw(sc){

            idToPrice = d3.map();

            var projection = d3.geo.mercator()
                                .center([15,63])
                                .scale(scale)
                                .translate([width/2,height/2])

            scale = scale + 100;
            var path = d3.geo.path().projection(projection);

            var svg = d3.select("#svgcontainer").append("svg")
                        .attr("width", width)
                        .attr("height", height);

            d3.json("src/sverige.json", function(error, sverige) {
               svg.selectAll(".future")
                    .data(topojson.feature(sverige, sverige.objects.future).features)
                    .enter().append("path")
                    .attr("d", path);

                    svg.selectAll("path")
                    .on("mouseover",function(d,i){
                      d3.select(this).style({fill: "gold","stroke-width": "2","stroke-dasharray": null});
                      d3.selectAll("#title").text(d.properties.KNNAMN.toString()).attr("class","test");

                    })
                    .on("click",function(d,i){
                      //console.log([d.properties.KNNAMN.toString()]);
                      d3.selectAll("#kommun-namn").text(d.properties.KNNAMN.toString()).attr("class","test");
                    })
                    .on("mouseout" ,function(d,i){d3.select(this).style({fill: "olive","stroke-width": "0.5"})});
            
                    svg.selectAll("path")
                    .data(topojson.feature(sverige, sverige.objects.future).features)
                    .exit()
                    .remove();
            });
          }
        </script>
  </body>
</html>
